<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Customer Info</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <link rel="stylesheet" href="style.css">
    </head>
    <body>
        <div id="msg">

        </div>
        <h3>Enter Customer Information</h3>
        <form id="customerForm">
            <div class="table">
                <div class="table-row">
                    <div class="table-cell">
                        <label for="salutation">Salutation</label>
                    </div>
                    <div class="table-cell">
                        <select id="salutation" name="salutation"  style="width: 100px !important;">
                            <option value=""> </option>
                            <option value="Mr">Mr</option>
                            <option value="Mrs">Mrs</option>
                            <option value="Miss">Miss</option>
                            <option value="Ms">Ms</option>
                            <option value="Dr">Dr</option>
                        </select>
                    </div>
                </div>
                <div class="table-row">
                    <div class="table-cell">
                        <label for="firstName">First Name</label>
                    </div>
                    <div class="table-cell">
                        <input type="text" maxlength="10" id="firstName" name="firstName"  placeholder="First Name">
                    </div>
                </div>
                <div class="table-row">
                    <div class="table-cell">
                        <label for="middleName">Middle Name</label>
                    </div>
                    <div class="table-cell">
                        <input type="text" maxlength="10"  id="middleName" name="middleName" placeholder="Middle Name">
                    </div>
                </div>
                <div class="table-row">
                    <div class="table-cell">
                        <label for="lastName">Last Name</label>
                    </div>
                    <div class="table-cell">
                        <input type="text" maxlength="20"  id="lastName" name="lastName" placeholder="Last Name">
                    </div>
                </div>
                <div class="table-row">
                    <div class="table-cell"></div>
                    <div class="table-cell">
                        <button type="button" id="submitBtn">Submit</button>
                    </div>
                </div>
            </div>
        </form>
        <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
        <script src="./js/libs/jquery/jquery.min.js"></script>
        <!-- Include all compiled plugins (below), or include individual files as needed -->
        <script>
            $(document).ready(function () {
                // click on button submit
                $("#submitBtn").on('click', function () {
                    var formData = $("#customerForm").serializeArray();
                    console.log("customerData = " + JSON.stringify(formData));
                    var data = {};
                    $(formData).each(function (index, obj) {
                        data[obj.name] = obj.value;
                    });

                    console.log("data = " + JSON.stringify(data));

                    $.ajax({
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        crossDomain: true,
                        dataType: "json",
                        type: "POST",
                        url: "http://localhost:8080/CrudController/resources/customercontroller/",
                        data: JSON.stringify(data)
                    }).done(function (data, textStatus, jqXHR) {
                        if (jqXHR.status === 200) {
                            $("#msg").removeClass();
                            $("#msg").toggleClass("alert alert-success");
                            $("#msg").html("Customer saved successfully.");
                        } else {
                            $("#msg").removeClass();
                            $("#msg").toggleClass("alert alert-danger");
                            $("#msg").html("There was an error saving customer data.");
                        }
                    }).fail(function (data, textStatus, jqXHR) {
                        console.log("ajax call failed");
                        console.log("data = " + JSON.stringify(data));
                        console.log("textStatus = " + textStatus);
                        console.log("jqXHR = " + jqXHR);
                        console.log("jqXHR.status = " + jqXHR.status);
                    });
                });
            });
        </script>
    </body>
</html>